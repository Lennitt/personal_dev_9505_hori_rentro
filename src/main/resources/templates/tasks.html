<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<head>
<meta charset="UTF-8">
<title>ToDoリスト</title>
<link rel="stylesheet" th:href="@{/css/style.css}">

</head>
<body>
	<header th:replace="header"></header>

	<main>
		
		<nav>
			
			<a href="/tasks">タスク一覧</a>
			<a href="/tasks/completed">完了済み一覧</a>
			<a th:each="category : ${categories}"
				th:href="@{/tasks(categoryId=${category.id})}"
				th:text="${category.name}">
			</a>
		</nav>
		<form action="/tasks/add" method="get">
			<button>NEWタスク</button>
		</form>
		<table>
			<tr>
				<th>完了</th>
				<th>タイトル</th>
				<th>メモ</th>
				<th>カテゴリー</th>
				<th>期限</th>
				<th>編集</th>
				<th>削除</th>
			</tr>
			<tr th:each="task : ${tasks}">
				<td>
					<form th:action="@{/tasks/{id}/complete(id=${task.id})}" method="post">
						<input type="checkbox" 
						th:checked="${task.done}" 
						th:disabled="${task.done}"
						onchange="this.form.submit()">
					</form>
				</td>
				<td th:text="${task.title}"></td>
				<td class="memo-cell" th:text="${task.memo}"></td>
				<td th:text="${task.category.name}"></td>
				<td>
					<span th:class="${task.closeDate}" th:text="${task.closing_date}"></span>
				</td>
				<td>
					<form th:action="@{/tasks/{taskId}/edit(taskId=${task.id})}" method="get">
						<button>✂️</button>
					</form>
				</td>
				<td>
					<form th:action="@{/tasks/{taskId}/delete(taskId=${task.id})}" method="post">
						<button>🗑️</button>
					</form>
				</td>
			</tr>
		</table>
	</main>

	<footer th:replace="footer"></footer>
</body>
</html>